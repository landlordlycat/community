(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-login"],{1129:function(e,t,n){"use strict";n.r(t);var r=n("994e"),a=n("f8f2");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("6367");var u,s=n("f0c5"),o=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,"96bd48c4",null,!1,r["a"],u);t["default"]=o.exports},4812:function(e,t,n){"use strict";var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0,n("96cf");var a=r(n("1da1")),i=r(n("d4ec")),u=r(n("bee2")),s=n("32fe"),o=n("0695"),c=function(){function e(){(0,i.default)(this,e)}return(0,u.default)(e,null,[{key:"login",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.request({url:"/v1/user/login",data:{username:t,password:n},method:"POST"});case 2:if(r=e.sent,r.errorCode){e.next=11;break}return o.config.compress&&(r.data.userInfo.avatar=r.data.userInfo.avatar+o.config.headerCompressRule),uni.setStorageSync("userInfo",r.data.userInfo),uni.setStorageSync("token",r.data.token),uni.showToast({title:"登录成功"}),e.abrupt("return",!0);case 11:uni.showToast({title:r.msg,icon:"none"});case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"regUser",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,n,r,a,i){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.request({url:"/v1/user/regUser",data:{username:t,password:r,email:n,repassword:a,qq:i},method:"POST"});case 2:if(u=e.sent,200==u.code){e.next=7;break}uni.showToast({title:u.msg,icon:"none"}),e.next=9;break;case 7:return uni.showToast({title:"注册成功"}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()},{key:"uploadHeader",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.upload({url:"v1/user/uploadHeader",file:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateName",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.tSend({url:"v1/user/updateName",data:{name:t},method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"compressImage",value:function(e){if(o.config.compress)return e+o.config.headerCompressRule}},{key:"changePassword",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.tSend({url:"v1/user/changePassword",data:t,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendFeedback",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.tSend({url:"v1/user/sendFeedback",data:t,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.User=c},6367:function(e,t,n){"use strict";var r=n("90b5"),a=n.n(r);a.a},"90b5":function(e,t,n){var r=n("9302");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("4f06").default;a("1dddfabc",r,!0,{sourceMap:!1,shadowMode:!1})},9302:function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,".allLimit[data-v-96bd48c4]{width:75%;margin:0 auto}.header[data-v-96bd48c4]{width:100%;height:50vw;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.headerBox[data-v-96bd48c4]{width:30vw;height:30vw;-webkit-box-shadow:5px 5px 28px 11px hsla(0,0%,78.4%,.2);box-shadow:5px 5px 28px 11px hsla(0,0%,78.4%,.2);margin-top:5vw;-webkit-border-radius:4vw;border-radius:4vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.headerBox uni-image[data-v-96bd48c4]{width:15vw;height:15vw}.content[data-v-96bd48c4]{width:100%}.contentTitle[data-v-96bd48c4]{font-size:7vw;font-weight:700}.loginText[data-v-96bd48c4]{display:block;text-align:center;color:#9f9f9f}.content uni-input[data-v-96bd48c4]{width:100%;height:15vw;background-color:#f7f7f7;margin:5vw 0;text-indent:10vw;-webkit-border-radius:7.5vw;border-radius:7.5vw}.bottom[data-v-96bd48c4]{width:100%;height:35vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.bottom uni-button[data-v-96bd48c4]{margin:0 auto;width:70%;height:15vw;background-color:#fbbd08;-webkit-border-radius:7.5vw;border-radius:7.5vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#fff;font-weight:700;-webkit-box-shadow:9px 5px 28px 3px rgba(255,190,0,.46);box-shadow:9px 5px 28px 3px rgba(255,190,0,.46)}",""]),e.exports=t},"994e":function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticStyle:{"background-color":"#fff"},attrs:{id:"all"}},[r("v-uni-view",{staticClass:"allLimit"},[r("v-uni-view",{staticClass:"header"},[r("v-uni-view",{staticClass:"headerBox"},[r("v-uni-image",{attrs:{src:n("b62e"),mode:""}})],1)],1),r("v-uni-form",{on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.sendLogin.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"content"},[r("v-uni-text",{staticClass:"contentTitle"},[e._v(e._s(e.isLogin?"登录":"注册"))]),r("v-uni-input",{attrs:{type:"text",name:"user",value:"",placeholder:"用户名"}}),r("v-uni-input",{attrs:{type:"password",name:"pass",value:"",placeholder:"密码"}}),e.isLogin?e._e():r("v-uni-input",{attrs:{type:"password",name:"okpass",value:"",placeholder:"确认密码"}}),e.isLogin?e._e():r("v-uni-input",{attrs:{type:"text",name:"qq",value:"",placeholder:"qq号码"}}),e.isLogin?e._e():r("v-uni-input",{attrs:{type:"text",name:"email",value:"",placeholder:"邮箱"}}),r("v-uni-text",{staticClass:"loginText",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isLogin?e.goRegister():e.goLogin()}}},[e._v(e._s(e.isLogin?"没有账号点我注册":"已有账号点我登录"))])],1),r("v-uni-view",{staticClass:"bottom"},[r("v-uni-button",{attrs:{"form-type":"submit"}},[e._v(e._s(e.isLogin?"Sign In":"Sign Up"))])],1)],1)],1)],1)},i=[]},b3f4:function(e,t,n){"use strict";(function(e){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=r(n("1da1")),i=n("4812"),u={data:function(){return{isLogin:!0}},methods:{goLogin:function(){this.isLogin=!0},goRegister:function(){this.isLogin=!1},sendLogin:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(n){var r,a,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.mp.detail.value,"",this,e.log(r),""!=r.user&&void 0!=r.user&&""!=r.pass&&void 0!=r.pass){t.next=9;break}return uni.showToast({title:"信息不能为空",icon:"none"}),t.abrupt("return",0);case 9:if(!(r["user"].length<2||r["user"].length>=30)){t.next=12;break}return uni.showTabBar({title:"用户名长度再2-30之间",icon:"none"}),t.abrupt("return",0);case 12:if(!this.isLogin){t.next=19;break}return t.next=15,i.User.login(r.user,r.pass);case 15:a=t.sent,a&&setTimeout((function(){uni.reLaunch({url:"./my"})}),1e3),t.next=23;break;case 19:return t.next=21,i.User.regUser(r.user,r.email,r.pass,r.okpass,r.qq);case 21:u=t.sent,u&&(this.isLogin=!0);case 23:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}(),sendRegister:function(){}},onLoad:function(e){}};t.default=u}).call(this,n("5a52")["default"])},b62e:function(e,t,n){e.exports=n.p+"static/img/index.da6bdd3d.png"},f8f2:function(e,t,n){"use strict";n.r(t);var r=n("b3f4"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a}}]);