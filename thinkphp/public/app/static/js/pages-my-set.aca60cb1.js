(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-set"],{4812:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0,r("96cf");var a=n(r("1da1")),o=n(r("d4ec")),u=n(r("bee2")),s=r("32fe"),i=r("0695"),c=function(){function e(){(0,o.default)(this,e)}return(0,u.default)(e,null,[{key:"login",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.request({url:"/v1/user/login",data:{username:t,password:r},method:"POST"});case 2:if(n=e.sent,n.errorCode){e.next=11;break}return i.config.compress&&(n.data.userInfo.avatar=n.data.userInfo.avatar+i.config.headerCompressRule),uni.setStorageSync("userInfo",n.data.userInfo),uni.setStorageSync("token",n.data.token),uni.showToast({title:"登录成功"}),e.abrupt("return",!0);case 11:uni.showToast({title:n.msg,icon:"none"});case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"regUser",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r,n,a,o){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.request({url:"/v1/user/regUser",data:{username:t,password:n,email:r,repassword:a,qq:o},method:"POST"});case 2:if(u=e.sent,200==u.code){e.next=7;break}uni.showToast({title:u.msg,icon:"none"}),e.next=9;break;case 7:return uni.showToast({title:"注册成功"}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));function t(t,r,n,a,o){return e.apply(this,arguments)}return t}()},{key:"uploadHeader",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.upload({url:"v1/user/uploadHeader",file:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateName",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.tSend({url:"v1/user/updateName",data:{name:t},method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"compressImage",value:function(e){if(i.config.compress)return e+i.config.headerCompressRule}},{key:"changePassword",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.tSend({url:"v1/user/changePassword",data:t,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendFeedback",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Http.tSend({url:"v1/user/sendFeedback",data:t,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.User=c},"53fc":function(e,t,r){"use strict";r.r(t);var n=r("d1b1"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},a3ad:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var n={uPopup:r("d78c").default,uInput:r("820e").default,uButton:r("83b6").default,uCellGroup:r("89b7").default,uCellItem:r("00dc").default,uIcon:r("6f72").default},a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("u-popup",{attrs:{mode:"top",height:"500","close-icon-pos":"bottom-right",closeable:!0},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("v-uni-view",{staticClass:"flexCenter",staticStyle:{width:"90%",height:"500rpx",margin:"0 auto","flex-direction":"column"}},[r("v-uni-view",{staticStyle:{width:"100%",margin:"10rpx 0"}},[r("u-input",{attrs:{type:e.type,border:e.border,placeholder:"输入原密码"},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword",t)},expression:"form.oldPassword"}})],1),r("v-uni-view",{staticStyle:{width:"100%",margin:"10rpx 0"}},[r("u-input",{attrs:{type:e.type,border:e.border,placeholder:"输入新密码"},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1),r("v-uni-view",{staticStyle:{width:"100%",margin:"10rpx 0 30rpx 0"}},[r("u-input",{attrs:{type:e.type,border:e.border,placeholder:"确认新密码"},model:{value:e.form.rePassword,callback:function(t){e.$set(e.form,"rePassword",t)},expression:"form.rePassword"}})],1),r("u-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePassword.apply(void 0,arguments)}}},[e._v("确认修改")])],1)],1),r("u-cell-group",[r("u-cell-item",{attrs:{title:"修改密码",arrow:!1,"arrow-direction":"down"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickCell(1)}}},[r("v-uni-view",{staticStyle:{display:"flex"},attrs:{slot:"right-icon"},slot:"right-icon"},[r("u-icon",{attrs:{name:"arrow-right",color:"#c5c5c5"}})],1)],1),r("u-cell-item",{attrs:{title:"帮助与反馈",arrow:!1},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickCell(2)}}},[r("v-uni-view",{staticStyle:{display:"flex"},attrs:{slot:"right-icon"},slot:"right-icon"},[r("u-icon",{attrs:{name:"arrow-right",color:"#c5c5c5"}})],1)],1),r("u-cell-item",{attrs:{title:"关于我们",arrow:!1},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickCell(3)}}},[r("v-uni-view",{staticStyle:{display:"flex"},attrs:{slot:"right-icon"},slot:"right-icon"},[r("u-icon",{attrs:{name:"arrow-right",color:"#c5c5c5"}})],1)],1)],1)],1)},o=[]},b1b8:function(e,t,r){"use strict";r.r(t);var n=r("a3ad"),a=r("53fc");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);var u,s=r("f0c5"),i=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"0fce2cee",null,!1,n["a"],u);t["default"]=i.exports},d1b1:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var a=n(r("1da1")),o=r("4812"),u={data:function(){return{src:"http://pic2.sc.chinaz.com/Files/pic/pic9/202002/hpic2119_s.jpg",show:!1,value:"",type:"password",border:!0,form:{oldPassword:"",newPassword:"",rePassword:""}}},created:function(){this.userInfo=uni.getStorageSync("userInfo"),this.value=this.userInfo.nickname},onLoad:function(){},methods:{changePassword:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!=t.form.oldPassword&&""!=t.form.newPassword&&""!=t.form.rePassword){r.next=3;break}return uni.showToast({title:"不能为空",icon:"none"}),r.abrupt("return");case 3:if(t.form.newPassword===t.form.rePassword){r.next=6;break}return uni.showToast({title:"两次密码不一致",icon:"none"}),r.abrupt("return");case 6:return r.next=8,o.User.changePassword(t.form);case 8:n=r.sent,e.log(n),200==n.code?(uni.showToast({title:n.msg}),t.show=!1):uni.showToast({title:n.msg,icon:"none"});case 11:case"end":return r.stop()}}),r)})))()},clickCell:function(e){1==e?this.show=!0:2==e?uni.navigateTo({url:"/pages/send/feedback"}):3==e&&uni.navigateTo({url:"/pages/about/about"})},changeHeader:function(){var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.images=r.tempFilePaths[0],e.isChange=!0,uni.showLoading({title:"图片上传中"}),t.next=5,o.User.uploadHeader(r.tempFilePaths[0]);case 5:n=t.sent.data,uni.hideLoading(),n=JSON.parse(n),200==n.code?(uni.showToast({title:"上传成功"}),e.userInfo.avatar=o.User.compressImage(n.data),uni.setStorageSync("userInfo",e.userInfo),e.$forceUpdate()):uni.showToast({title:n.msg,icon:"none"});case 9:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()})}}};t.default=u}).call(this,r("5a52")["default"])}}]);